<!DOCTYPE html>
<html>

<head>
  <title>Проект "Комменты"</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="container">
    <ul class="comments">

    </ul>
    <div class="add-form">
      <input type="text" class="add-form-name" placeholder="Введите ваше имя" />
      <textarea type="textarea" class="add-form-text" placeholder="Введите ваш коментарий" rows="4"></textarea>
      <div class="add-form-row">
        <button class="add-form-button">Написать</button>
      </div>
    </div>
  </div>
</body>

<script>
  "use strict";

  const addFormNameEl = document.querySelector(".add-form-name");
  const addFormTextEl = document.querySelector(".add-form-text");
  const addFormButtonEl = document.querySelector(".add-form-button");
  const commentsEl = document.querySelector(".comments");

  const comments = [{
    name: "Глеб Фокин",
    date: "12.02.22 12:18",
    text: "Это будет первый комментарий на этой странице",
    likes: 3,
    isLiked: false
  },
  {
    name: "Варвара Н.",
    date: "13.02.22 19:22",
    text: "Мне нравится как оформлена эта страница! ❤",
    likes: 75,
    isLiked: true
  }];

  const renderComments = () => {
    commentsEl.innerHTML = "";

    for (const comment of comments) {
      const likeButtonClass = comment.isLiked ? "like-button -active-like" : "like-button";

      const commentHtml = `
        <li class="comment">
        <div class="comment-header">
          <div>${comment.name}</div>
          <div>${comment.date}</div>
        </div>
        <div class="comment-body">
          <div class="comment-text">
            ${comment.text}
          </div>
        </div>
        <div class="comment-footer">
          <div class="likes">
            <span class="likes-counter">${comment.likes}</span>
            <button class="${likeButtonClass}"></button>
          </div>
        </div>
      </li>
      `
      commentsEl.innerHTML += commentHtml;
    }
  }

  renderComments();

  function formatDate() {
    const dateNow = new Date();

    const year = dateNow.getFullYear();
    const month = String(dateNow.getMonth() + 1).padStart(2, '0');
    const day = String(dateNow.getDate()).padStart(2, '0');
    const shortYear = String(year).slice(-2);

    const hours = String(dateNow.getHours()).padStart(2, '0');
    const minutes = String(dateNow.getMinutes()).padStart(2, '0');

    return `${day}.${month}.${shortYear} ${hours}:${minutes}`;
  }

  addFormButtonEl.addEventListener('click', function (e) {
    if (addFormNameEl.value.trim() === "" || addFormTextEl.value.trim() === "") {
      return;
    }

    const fullDate = formatDate();

    const commentHtml = `
    <li class="comment">
        <div class="comment-header">
          <div>${addFormNameEl.value.trim()}</div>
          <div>${fullDate}</div>
        </div>
        <div class="comment-body">
          <div class="comment-text">
            ${addFormTextEl.value.trim()}
          </div>
        </div>
        <div class="comment-footer">
          <div class="likes">
            <span class="likes-counter">0</span>
            <button class="like-button"></button>
          </div>
        </div>
      </li>
  `

    commentsEl.innerHTML += commentHtml;

    addFormNameEl.value = "";
    addFormTextEl.value = "";
    addFormNameEl.focus();
  });
</script>

</html>